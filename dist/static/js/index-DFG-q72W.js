import{e as w}from"./el-button-CvNljWXo.js";import{z as D,G as H,A as P}from"./index-BjJ8Uj.js";const y=(n,u,g,v)=>{const o={offsetX:0,offsetY:0},h=(t,e)=>{if(n.value){const{offsetX:a,offsetY:m}=o,s=n.value.getBoundingClientRect(),i=s.left,c=s.top,f=s.width,l=s.height,r=document.documentElement.clientWidth,L=document.documentElement.clientHeight,Y=-i+a,x=-c+m,b=r-i-f+a,z=L-c-(l<L?l:0)+m;v!=null&&v.value||(t=Math.min(Math.max(t,Y),b),e=Math.min(Math.max(e,x),z)),o.offsetX=t,o.offsetY=e,n.value.style.transform=`translate(${w(t)}, ${w(e)})`}},p=t=>{const e=t.clientX,a=t.clientY,{offsetX:m,offsetY:s}=o,i=f=>{const l=m+f.clientX-e,r=s+f.clientY-a;h(l,r)},c=()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",c)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",c)},M=()=>{u.value&&n.value&&(u.value.addEventListener("mousedown",p),window.addEventListener("resize",d))},E=()=>{u.value&&n.value&&(u.value.removeEventListener("mousedown",p),window.removeEventListener("resize",d))},X=()=>{o.offsetX=0,o.offsetY=0,n.value&&(n.value.style.transform="")},d=()=>{const{offsetX:t,offsetY:e}=o;h(t,e)};return D(()=>{H(()=>{g.value?M():E()})}),P(()=>{E()}),{resetPosition:X,updatePosition:d}};export{y as u};
