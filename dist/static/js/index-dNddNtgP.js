import{b as O,r as U,q as y,J as S,K as T,c as k,f as a,w as o,i as s,v as C,n as M,L as R,M as q,o as i,g as A,h as G,N as J,G as b,O as K,F as E,D as g,k as P,m as _,P as W,t as $,e as j}from"./vendor-DnuICktx.js";import{_ as H}from"./index-BVLn2-.js";const Q={class:"dialog-footer"},X=O({__name:"index",setup(Y){const r=U({nickName:"",role:0});let c=y([]),d=y([]),n=y(!1),u=U({id:0,nickName:"",role:[],userName:""});function L(){let t=[];r.nickName||r.role?(r.nickName&&(t=d.value.filter(e=>e.nickName.indexOf(r.nickName)!=-1)),r.role&&(t=r.nickName?t:d.value,t=t.filter(e=>e.role.find(m=>m.role==r.role)))):t=d.value,d.value=t}function B(t){n.value=!0,Object.assign(u,{...t,role:t.role.map(e=>e.role)})}function h(){n.value=!1;let t=d.value.find(e=>e.id===u.id);t.nickName=u.nickName,t.role=[],c.value.forEach(e=>{u.role.find(m=>m===e.roleId)&&(t==null||t.role.push({role:e.roleId,roleName:e.roleName}))})}S([()=>r.nickName,()=>r.role],()=>{(r.nickName==""||r.role==0)&&w()});function w(){d.value=[{id:1,nickName:"张三",userName:"张三",role:[{role:1,roleName:"管理员"},{role:2,roleName:"普通用户"}]},{id:2,nickName:"李四",userName:"李四",role:[{role:1,roleName:"管理员"}]},{id:3,nickName:"王五",userName:"王五",role:[{role:2,roleName:"普通用户"}]}]}function z(){c.value=[{roleName:"管理员",roleId:1,authority:[1,2,4,5,6,7,8,9,11,13,14,15,16]},{roleName:"普通用户",roleId:2,authority:[1,3,4,6,7,8,9,11,12,13]}]}return T(()=>{w(),z()}),(t,e)=>{const m=G,f=A,v=K,I=J,p=P,x=M,N=W,D=R,F=q;return i(),k("div",null,[a(x,{inline:!0,class:"search-form",model:r},{default:o(()=>[a(f,{label:"用户名称"},{default:o(()=>[a(m,{modelValue:r.nickName,"onUpdate:modelValue":e[0]||(e[0]=l=>r.nickName=l),placeholder:"请输入用户名称"},null,8,["modelValue"])]),_:1}),a(f,{label:"用户角色"},{default:o(()=>[a(I,{modelValue:r.role,"onUpdate:modelValue":e[1]||(e[1]=l=>r.role=l),class:"m-2",size:"large"},{default:o(()=>[(i(),b(v,{key:0,label:"全部",value:"0"})),(i(!0),k(E,null,g(s(c),l=>(i(),b(v,{key:l.roleId,label:l.roleName,value:l.roleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(f,null,{default:o(()=>[a(p,{type:"primary",onClick:L},{default:o(()=>e[6]||(e[6]=[_("查询",-1)])),_:1,__:[6]})]),_:1})]),_:1},8,["model"]),a(D,{data:s(d),border:"",style:{width:"100%"}},{default:o(()=>[a(N,{prop:"id",label:"编号",width:"180"}),a(N,{prop:"nickName",label:"用户昵称",width:"180"}),a(N,{prop:"role",label:"用户角色"},{default:o(l=>[(i(!0),k(E,null,g(l.row.role,V=>(i(),b(p,{key:V.role,link:"",type:"primary",size:"small"},{default:o(()=>[_($(V.roleName),1)]),_:2},1024))),128))]),_:1}),a(N,{prop:"role",label:"操作"},{default:o(l=>[a(p,{link:"",type:"primary",size:"small",onClick:V=>B(l.row)},{default:o(()=>e[7]||(e[7]=[_("编辑",-1)])),_:2,__:[7]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(F,{modelValue:s(n),"onUpdate:modelValue":e[5]||(e[5]=l=>C(n)?n.value=l:n=l),title:"编辑用户信息"},{footer:o(()=>[j("span",Q,[a(p,{onClick:e[4]||(e[4]=l=>C(n)?n.value=!1:n=!1)},{default:o(()=>e[8]||(e[8]=[_("取消",-1)])),_:1,__:[8]}),a(p,{type:"primary",onClick:h},{default:o(()=>e[9]||(e[9]=[_("修改",-1)])),_:1,__:[9]})])]),default:o(()=>[a(x,{model:s(u)},{default:o(()=>[a(f,{label:"用户昵称","label-width":"120px"},{default:o(()=>[a(m,{modelValue:s(u).nickName,"onUpdate:modelValue":e[2]||(e[2]=l=>s(u).nickName=l),class:"w192",autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(f,{label:"用户角色","label-width":"120px"},{default:o(()=>[a(I,{modelValue:s(u).role,"onUpdate:modelValue":e[3]||(e[3]=l=>s(u).role=l),multiple:"",class:"m-2",size:"large",placeholder:"请选择角色"},{default:o(()=>[(i(!0),k(E,null,g(s(c),l=>(i(),b(v,{key:l.roleId,label:l.roleName,value:l.roleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),le=H(X,[["__scopeId","data-v-46501cef"]]);export{le as default};
